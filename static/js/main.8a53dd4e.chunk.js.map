{"version":3,"sources":["App.module.css","components/ImageGalleryItem/ImageGalleryItem.module.css","components/ImageGallery/ImageGallery.module.css","components/Modal/Modal.module.css","redux/images/images-actions.js","components/ImageGalleryItem/ImageGalleryItem.js","redux/images/images-operations.js","redux/images/images-selectors.js","components/ImageGallery/ImageGallery.js","components/Form/Form.js","images/close-sprite.svg","components/Modal/Modal.js","App.js","redux/images/images-reducers.js","redux/store.js","index.js","components/Form/Form.module.css"],"names":["module","exports","getImagesSucces","createAction","getCommentsSucces","addCommentSucces","getBigImageSucces","setError","resetError","loaderOn","loaderOff","closeModal","openModal","ImageGalleryItem","src","id","dispatch","useDispatch","onClick","actions","className","styles","alt","axios","defaults","baseURL","get","then","data","catch","error","message","finally","a","comments","bigImage","Promise","all","commentsResp","bigImageResp","Array","isArray","comentData","post","console","log","getImages","state","images","getComments","getBigImage","getIsLoading","isLoading","getError","getModalId","modalId","ImageGallery","useSelector","loading","useEffect","operations","type","color","height","width","map","image","image_id","Form","useState","authorName","setAuthorName","comment","setComment","form","onSubmit","event","preventDefault","commentData","postComment","name","description","formLabel","input","placeholder","value","onChange","target","button","Modal","modalRoot","document","querySelector","BigImageSrc","onCloseModal","escapeModal","code","window","addEventListener","removeEventListener","createPortal","currentTarget","Overlay","imageFormDesk","commentsBlock","commentsMobile","listItem","authorText","commentText","commentsDesctop","closeButton","href","sprite","App","container","title","footer","imagesRducer","createReducer","_","payload","commentsReducer","bigImageReducer","errorReducer","loaderReducer","modalIdReducer","middleware","getDefaultMiddleware","rootReducer","combineReducers","store","configureStore","reducer","devTools","process","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.8a53dd4e.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"App_container__1zmf_\",\"title\":\"App_title__1p_y9\",\"footer\":\"App_footer__3CWW9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__ZmyKB\",\"ImageGalleryItem-image\":\"ImageGalleryItem_ImageGalleryItem-image__2m23F\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__3cALR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__2f7__\",\"Modal\":\"Modal_Modal__34NAP\",\"imageFormDesk\":\"Modal_imageFormDesk__205Wt\",\"commentsDesctop\":\"Modal_commentsDesctop__3iUDF\",\"commentsBlock\":\"Modal_commentsBlock__cOoE2\",\"commentsMobile\":\"Modal_commentsMobile__1k5Ld\",\"authorText\":\"Modal_authorText__1jMnb\",\"commentText\":\"Modal_commentText__150Wq\",\"listItem\":\"Modal_listItem__3r505\",\"bigImage\":\"Modal_bigImage__3fONx\",\"closeButton\":\"Modal_closeButton__1O2w4\"};","import { createAction } from '@reduxjs/toolkit';\r\n\r\nconst getImagesSucces = createAction('images/getImagesSucces');\r\nconst getCommentsSucces = createAction('images/getCommentsSucces');\r\nconst addCommentSucces = createAction('images/addCommentSucces');\r\nconst getBigImageSucces = createAction('images/getBigImageSucces');\r\n\r\nconst setError = createAction('setError');\r\nconst resetError = createAction('resetError');\r\nconst loaderOn = createAction('images/loaderOn');\r\nconst loaderOff = createAction('images/loaderOff');\r\nconst closeModal = createAction('images/closeModal');\r\nconst openModal=createAction('images/openModal');\r\n\r\nexport default {\r\n  getImagesSucces,\r\n  getCommentsSucces,\r\n  addCommentSucces,\r\n  getBigImageSucces,\r\n  setError,\r\n  resetError,\r\n  loaderOn,\r\n  loaderOff,\r\n  closeModal,\r\n  openModal\r\n};\r\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { useDispatch } from 'react-redux'\nimport actions from '../../redux/images/images-actions'\nimport styles from './ImageGalleryItem.module.css'\nconst ImageGalleryItem = ({ src, id }) => {\n    const dispatch = useDispatch();\n    const openModal=()=>dispatch(actions.openModal(id))\n    return (\n        <li onClick={() => openModal(id)} className={styles[\"ImageGalleryItem\"]}>\n            <img src={src} alt=\"\" className={styles[\"ImageGalleryItem-image\"]} />\n        </li>\n    );\n};\n\nexport default ImageGalleryItem;\n\nImageGalleryItem.propTypes = {\n    src: PropTypes.string.isRequired,\n    id: PropTypes.number.isRequired,\n}","import axios from 'axios';\r\nimport actions from './images-actions';\r\nconst {\r\n  getImagesSucces,\r\n  getCommentsSucces,\r\n  addCommentSucces,\r\n  getBigImageSucces,\r\n  resetError,\r\n  setError,\r\n  loaderOn,\r\n  loaderOff,\r\n} = actions;\r\n\r\naxios.defaults.baseURL = 'https://tzfrontend.herokuapp.com';\r\n\r\nconst loadImagesHandler = () => dispatch => {\r\n  dispatch(loaderOn());\r\n  dispatch(resetError());\r\n  axios\r\n    .get('/images/')\r\n    .then(({ data }) => {\r\n      dispatch(getImagesSucces(data));\r\n    })\r\n    .catch(error => dispatch(setError(error.message)))\r\n    .finally(() => dispatch(loaderOff()));\r\n};\r\n\r\nconst openModalHandler = id => async dispatch => {\r\n  dispatch(loaderOn());\r\n  dispatch(resetError());\r\n  try {\r\n    const comments = axios.get(`/comments/${id}`);\r\n    const bigImage = axios.get(`/images/${id}`);\r\n    const [commentsResp, bigImageResp] = await Promise.all([\r\n      comments,\r\n      bigImage,\r\n    ]);\r\n    if (Array.isArray(commentsResp.data)) {\r\n       dispatch(getCommentsSucces(commentsResp.data));\r\n    }\r\n    dispatch(getBigImageSucces(bigImageResp.data.src));\r\n  } catch (error) {\r\n    dispatch(setError(error.message));\r\n  } finally {\r\n    dispatch(loaderOff());\r\n  }\r\n};\r\n\r\nconst addCommentHandler = comentData => dispatch => {\r\n  dispatch(loaderOn());\r\n  dispatch(resetError());\r\n  axios\r\n    .post('/comments/add/', comentData)\r\n    .then(({ data }) => dispatch(addCommentSucces(data)))\r\n    .catch(error => console.log(error))\r\n    .finally(() => dispatch(loaderOff()));\r\n};\r\n\r\nexport default {\r\n  loadImagesHandler,\r\n  openModalHandler,\r\n  addCommentHandler,\r\n};\r\n","\r\nexport const getImages = state => state.images;\r\n\r\nexport const getComments = state => state.comments;\r\n\r\nexport const getBigImage = state => state.bigImage;\r\n\r\nexport const getIsLoading = state => state.isLoading;\r\n\r\nexport const getError = state => state.error;\r\n\r\nexport const getModalId = state => state.modalId;\r\n","import React, { useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport styles from './ImageGallery.module.css';\nimport ImageGalleryItem from '../ImageGalleryItem/ImageGalleryItem';\nimport operations from '../../redux/images/images-operations';\nimport Loader from 'react-loader-spinner';\nimport {\n  getImages,\n  getError,\n  getIsLoading,\n} from '../../redux/images/images-selectors';\n\nconst ImageGallery = () => {\n  const images = useSelector(getImages);\n  const error = useSelector(getError);\n  const loading = useSelector(getIsLoading);\n  const dispatch = useDispatch();\n  const fetchImages = () => dispatch(operations.loadImagesHandler());\n  useEffect(() => {\n    fetchImages();\n  }, []);\n\n  return (\n    <>\n      {error && (\n        <>\n          <h1>Error</h1>\n          <p>{error}</p>\n        </>\n      )}\n      {loading && (\n        <Loader type=\"ThreeDots\" color=\"#00BFFF\" height={80} width={80} />\n      )}\n      <ul className={styles.ImageGallery}>\n        {images.map(image => (\n          <ImageGalleryItem\n            key={image.image_id}\n            id={image.image_id}\n            src={image.src}\n          />\n        ))}\n      </ul>\n    </>\n  );\n};\n\nexport default ImageGallery;\n","import React, { useState } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport styles from './Form.module.css';\r\nimport operations from '../../redux/images/images-operations'\r\nimport {getError,getIsLoading} from '../../redux/images/images-selectors'\r\nimport Loader from 'react-loader-spinner';\r\n\r\nconst Form = ({ id }) => {\r\n  const [authorName, setAuthorName] = useState('');\r\n  const [comment, setComment] = useState('');\r\n  const error = useSelector(getError);\r\n  const loading = useSelector(getIsLoading);\r\n  const dispatch = useDispatch();\r\n  const postComment = commentData => dispatch(operations.addCommentHandler(commentData));\r\n\r\n  const authorNameChange = ({ target }) => {\r\n    const { value } = target;\r\n    setAuthorName(value);\r\n  };\r\n  const commentChange = ({ target }) => {\r\n    const { value } = target;\r\n    setComment(value);\r\n  };\r\n  const resetForm = () => {\r\n    setAuthorName('');\r\n    setComment('');\r\n  };\r\n\r\n  const addNewComment = event => {\r\n    event.preventDefault();\r\n    const commentData = {\r\n      name: authorName,\r\n      description: comment,\r\n      image_id: id,\r\n    };\r\n    postComment(commentData);\r\n    resetForm();\r\n  };\r\n  return (\r\n    <>\r\n      {error && (\r\n        <>\r\n          <h1>Error</h1>\r\n          <p>{error}</p>\r\n        </>\r\n      )}\r\n      {loading && (\r\n        <Loader type=\"ThreeDots\" color=\"#00BFFF\" height={80} width={80} />\r\n      )}\r\n      <form className={styles.form} onSubmit={addNewComment}>\r\n        <label className={styles.formLabel}>\r\n          <input\r\n            className={styles.input}\r\n            type=\"text\"\r\n            placeholder=\"Ваше имя\"\r\n            name=\"authorName\"\r\n            value={authorName}\r\n            onChange={authorNameChange}\r\n          />\r\n        </label>\r\n        <label className={styles.formLabel}>\r\n          <input\r\n            className={styles.input}\r\n            type=\"text\"\r\n            placeholder=\"Ваш комментарий\"\r\n            name=\"comment\"\r\n            value={comment}\r\n            onChange={commentChange}\r\n          />\r\n        </label>\r\n        <button className={styles.button} type=\"submit\">\r\n          Оставить комментарий\r\n        </button>\r\n      </form>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Form;\r\n\r\nForm.propTypes = {\r\n    id: PropTypes.number.isRequired,\r\n}","export default __webpack_public_path__ + \"static/media/close-sprite.de317cbf.svg\";","import React, { useEffect } from 'react';\nimport { createPortal } from 'react-dom';\nimport { useSelector, useDispatch } from 'react-redux';\nimport operations from '../../redux/images/images-operations';\nimport {\n  getComments,\n  getBigImage,\n  getModalId,\n} from '../../redux/images/images-selectors';\nimport actions from '../../redux/images/images-actions';\nimport styles from './Modal.module.css';\nimport Form from '../Form/Form';\nimport sprite from '../../images/close-sprite.svg';\n\nconst Modal = () => {\n  const modalRoot = document.querySelector('#modal-root');\n  const BigImageSrc = useSelector(getBigImage);\n  const id = useSelector(getModalId);\n  const comments = useSelector(getComments);\n  const dispatch = useDispatch();\n  const fetchModalData = () => dispatch(operations.openModalHandler(id));\n  const onCloseModal = () => dispatch(actions.closeModal());\n\n  useEffect(() => {\n    fetchModalData();\n  }, []);\n  const closeModal = event => {\n    if (event.target === event.currentTarget) {\n      onCloseModal();\n    }\n  };\n  const escapeModal = event => {\n    if (event.code === 'Escape') {\n      onCloseModal();\n    }\n  };\n  useEffect(() => {\n    window.addEventListener('keydown', escapeModal);\n    return () => {\n      window.removeEventListener('keydown', escapeModal);\n    };\n  }, []);\n\n  return createPortal(\n    <div onClick={closeModal} className={styles.Overlay}>\n      <div className={styles.Modal}>\n        <div className={styles.imageFormDesk}>\n          <img className={styles.bigImage} src={BigImageSrc} alt=\"image\" />\n          <div className={styles.commentsBlock}>\n            <ul className={styles.commentsMobile}>\n              {comments.map(comment => (\n                <li key={comment.id} className={styles.listItem}>\n                  <p className={styles.authorText}>{comment.name}</p>\n                  <p className={styles.commentText}>{comment.description}</p>\n                </li>\n              ))}\n            </ul>\n            <Form id={id} />\n          </div>\n        </div>\n        <ul className={styles.commentsDesctop}>\n          {comments.map(comment => (\n            <li key={comment.id} className={styles.listItem}>\n              <p className={styles.authorText}>{comment.name}</p>\n              <p className={styles.commentText}>{comment.description}</p>\n            </li>\n          ))}\n        </ul>\n        <button\n          type=\"button\"\n          className={styles.closeButton}\n          onClick={()=>onCloseModal()}\n        >\n          <svg width=\"20\" height=\"20\">\n            <use href={sprite + '#icon-close'}></use>\n          </svg>\n        </button>\n      </div>\n    </div>,\n    modalRoot,\n  );\n};\n\nexport default Modal;\n","import React from 'react';\nimport ImageGallery from './components/ImageGallery/ImageGallery';\nimport { useSelector } from 'react-redux';\nimport { getModalId } from './redux/images/images-selectors';\nimport Modal from './components/Modal/Modal';\nimport styles from './App.module.css';\n\nconst App = () => {\n  const modalId = useSelector(getModalId);\n  return (\n    <div className={styles.container}>\n      <main>\n        <h1 className={styles.title}>Test App Aleksey Kolpakov</h1>\n        <ImageGallery />\n        {modalId && <Modal />}\n      </main>\n      <footer className={styles.footer}>\n        <p>&copy; 2018-2019</p>\n      </footer>\n    </div>\n  );\n};\n\nexport default App;\n","import { createReducer } from '@reduxjs/toolkit';\r\nimport actions from './images-actions';\r\nconst {\r\n  getImagesSucces,\r\n  getCommentsSucces,\r\n  addCommentSucces,\r\n  getBigImageSucces,\r\n  resetError,\r\n  setError,\r\n  loaderOn,\r\n  loaderOff,\r\n  closeModal,\r\n  openModal,\r\n} = actions;\r\n\r\nexport const imagesRducer = createReducer([], {\r\n  [getImagesSucces]: (_, { payload }) => [...payload],\r\n});\r\n\r\nexport const commentsReducer = createReducer([], {\r\n  [getCommentsSucces]: (_, { payload }) => [...payload],\r\n  [addCommentSucces]: (state, { payload }) => [...state,payload],\r\n  [closeModal]: () => [],\r\n});\r\n\r\nexport const bigImageReducer = createReducer('', {\r\n  [getBigImageSucces]: (_, { payload }) => payload,\r\n  [closeModal]: () => [],\r\n});\r\n\r\nexport const errorReducer = createReducer(false, {\r\n  [resetError]: () => false,\r\n  [setError]: (state, { payload }) => payload,\r\n});\r\n\r\nexport const loaderReducer = createReducer(false, {\r\n  [loaderOn]: () => true,\r\n  [loaderOff]: () => false,\r\n});\r\n\r\nexport const modalIdReducer = createReducer('', {\r\n  [openModal]: (_, { payload }) => payload,\r\n  [closeModal]:()=>'',\r\n})","import {\r\n  configureStore,\r\n  getDefaultMiddleware,\r\n  combineReducers,\r\n} from '@reduxjs/toolkit';\r\nimport {\r\n  imagesRducer,\r\n  commentsReducer,\r\n  bigImageReducer,\r\n  errorReducer,\r\n  loaderReducer,\r\n  modalIdReducer,\r\n} from './images/images-reducers';\r\n\r\nconst middleware = getDefaultMiddleware();\r\nconst rootReducer = combineReducers({\r\n  images: imagesRducer,\r\n  comments: commentsReducer,\r\n  bigImage: bigImageReducer,\r\n  isLoading: loaderReducer,\r\n  error: errorReducer,\r\n  modalId: modalIdReducer,\r\n});\r\n\r\nconst store = configureStore({\r\n  reducer: rootReducer,\r\n  devTools: process.env.NODE_ENV === 'development',\r\n  middleware,\r\n});\r\n\r\nexport default store;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport App from './App';\nimport store from './redux/store'\nimport 'modern-normalize/modern-normalize.css';\nimport './styles/reset.css';\n\nimport './redux/images/images-operations'\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n      </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"Form_form__1xb3b\",\"modal-form\":\"Form_modal-form__3Qt2D\",\"input\":\"Form_input__1xlM2\",\"button\":\"Form_button__2XlvV\"};"],"sourceRoot":""}