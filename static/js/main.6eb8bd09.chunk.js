(this["webpackJsonptest-app-images-react"]=this["webpackJsonptest-app-images-react"]||[]).push([[0],{16:function(e,t,c){e.exports={container:"App_container__1zmf_",title:"App_title__1p_y9",footer:"App_footer__3CWW9"}},21:function(e,t,c){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__ZmyKB","ImageGalleryItem-image":"ImageGalleryItem_ImageGalleryItem-image__2m23F"}},31:function(e,t,c){e.exports={ImageGallery:"ImageGallery_ImageGallery__3cALR"}},5:function(e,t,c){e.exports={Overlay:"Modal_Overlay__2f7__",Modal:"Modal_Modal__34NAP",imageFormDesk:"Modal_imageFormDesk__205Wt",commentsDesctop:"Modal_commentsDesctop__3iUDF",commentsBlock:"Modal_commentsBlock__cOoE2",commentsMobile:"Modal_commentsMobile__1k5Ld",authorText:"Modal_authorText__1jMnb",commentText:"Modal_commentText__150Wq",listItem:"Modal_listItem__3r505",bigImage:"Modal_bigImage__3fONx",closeButton:"Modal_closeButton__1O2w4"}},79:function(e,t,c){},80:function(e,t,c){"use strict";c.r(t);var a=c(0),n=c.n(a),r=c(10),o=c.n(r),s=c(3),i=c(31),l=c.n(i),m=c(2),u={getImagesSucces:Object(m.b)("images/getImagesSucces"),getCommentsSucces:Object(m.b)("images/getCommentsSucces"),addCommentSucces:Object(m.b)("images/addCommentSucces"),getBigImageSucces:Object(m.b)("images/getBigImageSucces"),setError:Object(m.b)("setError"),resetError:Object(m.b)("resetError"),loaderOn:Object(m.b)("images/loaderOn"),loaderOff:Object(m.b)("images/loaderOff"),closeModal:Object(m.b)("images/closeModal"),openModal:Object(m.b)("images/openModal")},j=c(21),b=c.n(j),d=c(1),O=function(e){var t=e.src,c=e.id,a=Object(s.b)();return Object(d.jsx)("li",{onClick:function(){return a(u.openModal(c))},className:b.a.ImageGalleryItem,children:Object(d.jsx)("img",{src:t,alt:"",className:b.a["ImageGalleryItem-image"]})})},f=c(22),g=c.n(f),p=c(13),h=c(32),_=c(11),x=c.n(_),v=u.getImagesSucces,I=u.getCommentsSucces,y=u.addCommentSucces,N=u.getBigImageSucces,M=u.resetError,S=u.setError,k=u.loaderOn,F=u.loaderOff;x.a.defaults.baseURL="https://tzfrontend.herokuapp.com";var E,w,B,C,T,G=function(){return function(e){e(k()),e(M()),x.a.get("/images/").then((function(t){var c=t.data;e(v(c))})).catch((function(t){return e(S(t.message))})).finally((function(){return e(F())}))}},D=function(e){return function(){var t=Object(h.a)(g.a.mark((function t(c){var a,n,r,o,s,i;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c(k()),c(M()),t.prev=2,a=x.a.get("/comments/".concat(e)),n=x.a.get("/images/".concat(e)),t.next=7,Promise.all([a,n]);case 7:r=t.sent,o=Object(p.a)(r,2),s=o[0],i=o[1],Array.isArray(s.data)&&c(I(s.data)),c(N(i.data.src)),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(2),c(S(t.t0.message));case 18:return t.prev=18,c(F()),t.finish(18);case 21:case"end":return t.stop()}}),t,null,[[2,15,18,21]])})));return function(e){return t.apply(this,arguments)}}()},A=function(e){return function(t){t(k()),t(M()),x.a.post("/comments/add/",e).then((function(e){var c=e.data;return t(y(c))})).catch((function(e){return console.log(e)})).finally((function(){return t(F())}))}},L=c(15),W=c.n(L),P=function(e){return e.images},q=function(e){return e.comments},z=function(e){return e.bigImage},J=function(e){return e.isLoading},K=function(e){return e.error},R=function(e){return e.modalId},U=function(){var e=Object(s.c)(P),t=Object(s.c)(K),c=Object(s.c)(J),n=Object(s.b)();Object(a.useEffect)((function(){n(G())}),[]);var r=function(){console.log("working")};return Object(d.jsxs)(d.Fragment,{children:[t&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h1",{children:"Error"}),Object(d.jsx)("p",{children:t})]}),c&&Object(d.jsx)(W.a,{type:"ThreeDots",color:"#00BFFF",height:80,width:80}),Object(d.jsx)("ul",{className:l.a.ImageGallery,children:e.map((function(e){return Object(d.jsx)(O,{id:e.image_id,src:e.src,openImage:r},e.image_id)}))})]})},Q=c(5),V=c.n(Q),X=c(9),Z=c.n(X),H=function(e){var t=e.id,c=Object(a.useState)(""),n=Object(p.a)(c,2),r=n[0],o=n[1],i=Object(a.useState)(""),l=Object(p.a)(i,2),m=l[0],u=l[1],j=Object(s.c)(K),b=Object(s.c)(J),O=Object(s.b)();return Object(d.jsxs)(d.Fragment,{children:[j&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h1",{children:"Error"}),Object(d.jsx)("p",{children:j})]}),b&&Object(d.jsx)(W.a,{type:"ThreeDots",color:"#00BFFF",height:80,width:80}),Object(d.jsxs)("form",{className:Z.a.form,onSubmit:function(e){e.preventDefault(),function(e){O(A(e))}({name:r,description:m,image_id:t}),o(""),u("")},children:[Object(d.jsx)("label",{className:Z.a.formLabel,children:Object(d.jsx)("input",{className:Z.a.input,type:"text",placeholder:"\u0412\u0430\u0448\u0435 \u0438\u043c\u044f",name:"authorName",value:r,onChange:function(e){var t=e.target.value;o(t)}})}),Object(d.jsx)("label",{className:Z.a.formLabel,children:Object(d.jsx)("input",{className:Z.a.input,type:"text",placeholder:"\u0412\u0430\u0448 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",name:"comment",value:m,onChange:function(e){var t=e.target.value;u(t)}})}),Object(d.jsx)("button",{className:Z.a.button,type:"submit",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"})]})]})},Y=c.p+"static/media/close-sprite.de317cbf.svg",$=function(){var e=document.querySelector("#modal-root"),t=Object(s.c)(z),c=Object(s.c)(R),n=Object(s.c)(q),o=Object(s.b)(),i=function(){return o(u.closeModal())};Object(a.useEffect)((function(){o(D(c))}),[]);var l=function(e){"Escape"===e.code&&i()};return Object(a.useEffect)((function(){return window.addEventListener("keydown",l),function(){window.removeEventListener("keydown",l)}}),[]),Object(r.createPortal)(Object(d.jsx)("div",{onClick:function(e){e.target===e.currentTarget&&i()},className:V.a.Overlay,children:Object(d.jsxs)("div",{className:V.a.Modal,children:[Object(d.jsxs)("div",{className:V.a.imageFormDesk,children:[Object(d.jsx)("img",{className:V.a.bigImage,src:t,alt:"image"}),Object(d.jsxs)("div",{className:V.a.commentsBlock,children:[Object(d.jsx)("ul",{className:V.a.commentsMobile,children:n.map((function(e){return Object(d.jsxs)("li",{className:V.a.listItem,children:[Object(d.jsx)("p",{className:V.a.authorText,children:e.name}),Object(d.jsx)("p",{className:V.a.commentText,children:e.description})]},e.id)}))}),Object(d.jsx)(H,{id:c})]})]}),Object(d.jsx)("ul",{className:V.a.commentsDesctop,children:n.map((function(e){return Object(d.jsxs)("li",{className:V.a.listItem,children:[Object(d.jsx)("p",{className:V.a.authorText,children:e.name}),Object(d.jsx)("p",{className:V.a.commentText,children:e.description})]},e.id)}))}),Object(d.jsx)("button",{type:"button",className:V.a.closeButton,onClick:function(){return i()},children:Object(d.jsx)("svg",{width:"20",height:"20",children:Object(d.jsx)("use",{href:Y+"#icon-close"})})})]})}),e)},ee=c(16),te=c.n(ee),ce=function(){var e=Object(s.c)(R);return Object(d.jsxs)("div",{className:te.a.container,children:[Object(d.jsxs)("main",{children:[Object(d.jsx)("h1",{className:te.a.title,children:"Test App Aleksey Kolpakov"}),Object(d.jsx)(U,{}),e&&Object(d.jsx)($,{})]}),Object(d.jsx)("footer",{className:te.a.footer,children:Object(d.jsx)("p",{children:"\xa9 2018-2019"})})]})},ae=c(8),ne=c(7),re=c(17),oe=u.getImagesSucces,se=u.getCommentsSucces,ie=u.addCommentSucces,le=u.getBigImageSucces,me=u.resetError,ue=u.setError,je=u.loaderOn,be=u.loaderOff,de=u.closeModal,Oe=u.openModal,fe=Object(m.c)([],Object(ne.a)({},oe,(function(e,t){var c=t.payload;return Object(re.a)(c)}))),ge=Object(m.c)([],(E={},Object(ne.a)(E,se,(function(e,t){var c=t.payload;return Object(re.a)(c)})),Object(ne.a)(E,ie,(function(e,t){var c=t.payload;return[].concat(Object(re.a)(e),[c])})),Object(ne.a)(E,de,(function(){return[]})),E)),pe=Object(m.c)("",(w={},Object(ne.a)(w,le,(function(e,t){return t.payload})),Object(ne.a)(w,de,(function(){return[]})),w)),he=Object(m.c)(!1,(B={},Object(ne.a)(B,me,(function(){return!1})),Object(ne.a)(B,ue,(function(e,t){return t.payload})),B)),_e=Object(m.c)(!1,(C={},Object(ne.a)(C,je,(function(){return!0})),Object(ne.a)(C,be,(function(){return!1})),C)),xe=Object(m.c)("",(T={},Object(ne.a)(T,Oe,(function(e,t){return t.payload})),Object(ne.a)(T,de,(function(){return""})),T)),ve=Object(m.d)(),Ie=Object(ae.b)({images:fe,comments:ge,bigImage:pe,isLoading:_e,error:he,modalId:xe}),ye=Object(m.a)({reducer:Ie,devTools:!1,middleware:ve});c(78),c(79);o.a.render(Object(d.jsx)(n.a.StrictMode,{children:Object(d.jsx)(s.a,{store:ye,children:Object(d.jsx)(ce,{})})}),document.getElementById("root"))},9:function(e,t,c){e.exports={form:"Form_form__1xb3b","modal-form":"Form_modal-form__3Qt2D",input:"Form_input__1xlM2",button:"Form_button__2XlvV"}}},[[80,1,2]]]);
//# sourceMappingURL=main.6eb8bd09.chunk.js.map